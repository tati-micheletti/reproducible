<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download, Checksum, Extract files — preProcess • reproducible</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Download, Checksum, Extract files — preProcess" />

<meta property="og:description" content="This does downloading (via downloadFile), checksumming (Checksums),
and extracting from archives (extractFromArchive), plus cleaning up of input
arguments (e.g., paths, function names).
This is the first stage of three used in prepInputs." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-5');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reproducible</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Intro-to-Cache.html">Introduction to Cache</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/PredictiveEcology/reproducible">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download, Checksum, Extract files</h1>
    <small class="dont-index">Source: <a href='https://github.com/PredictiveEcology/reproducible/blob/master/R/preProcess.R'><code>R/preProcess.R</code></a></small>
    <div class="hidden name"><code>preProcess.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This does downloading (via <code>downloadFile</code>), checksumming (<code>Checksums</code>),
and extracting from archives (<code>extractFromArchive</code>), plus cleaning up of input
arguments (e.g., paths, function names).
This is the first stage of three used in <code>prepInputs</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>preProcess</span>(<span class='kw'>targetFile</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>url</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>archive</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>alsoExtract</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>destinationPath</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/options'>getOption</a></span>(<span class='st'>"reproducible.destinationPath"</span>, <span class='st'>"."</span>),
  <span class='kw'>fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dlFun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>quick</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/options'>getOption</a></span>(<span class='st'>"reproducible.quick"</span>),
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/options'>getOption</a></span>(<span class='st'>"reproducible.overwrite"</span>, <span class='fl'>FALSE</span>),
  <span class='kw'>purge</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>useCache</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/options'>getOption</a></span>(<span class='st'>"reproducible.useCache"</span>, <span class='fl'>FALSE</span>),
  <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>targetFile</th>
      <td><p>Character string giving the path to the eventual file
(raster, shapefile, csv, etc.) after downloading and extracting from a zip
or tar archive. This is the file <em>before</em> it is passed to
<code>postProcess</code>. Currently, the internal checksumming does not checksum
the file after it is <code>postProcess</code>ed (e.g., cropped/reprojected/masked).
Using <code>Cache</code> around <code>prepInputs</code> will do a sufficient job in these cases.
See table in <code>preProcess</code>.</p></td>
    </tr>
    <tr>
      <th>url</th>
      <td><p>Optional character string indicating the URL to download from.
If not specified, then no download will be attempted. If not entry
exists in the <code>CHECKSUMS.txt</code> (in <code>destinationPath</code>), an entry
will be created or appended to. This <code>CHECKSUMS.txt</code> entry will be used
in subsequent calls to
<code>prepInputs</code> or <code>preProcess</code>, comparing the file on hand with the ad hoc
<code>CHECKSUMS.txt</code>. See table in <code>preProcess</code>.</p></td>
    </tr>
    <tr>
      <th>archive</th>
      <td><p>Optional character string giving the path of an archive
containing <code>targetFile</code>, or a vector giving a set of nested archives
(e.g., <code><a href='https://www.rdocumentation.org/packages/base/topics/c'>c("xxx.tar", "inner.zip", "inner.rar")</a></code>). If there is/are (an) inner
archive(s), but they are unknown, the function will try all until it finds
the <code>targetFile</code>. See table in <code>preProcess</code>.</p></td>
    </tr>
    <tr>
      <th>alsoExtract</th>
      <td><p>Optional character string naming files other than
<code>targetFile</code> that must be extracted from the <code>archive</code>. If
<code>NULL</code>, the default, then it will extract all files. Other options:
<code>"similar"</code> will extract all files with the same filename without
file extension as <code>targetFile</code>. <code>NA</code> will extract nothing other
than <code>targetFile</code>. A character string of specific file names will cause
only those to be extracted. See table in <code>preProcess</code>.</p></td>
    </tr>
    <tr>
      <th>destinationPath</th>
      <td><p>Character string of a directory in which to download
and save the file that comes from <code>url</code> and is also where the function
will look for <code>archive</code> or <code>targetFile</code>. NOTE (still experimental):
To prevent repeated downloads in different locations, the user can also set
<code><a href='https://www.rdocumentation.org/packages/base/topics/options'>options("reproducible.inputPaths")</a></code> to one or more local file paths to
search for the file before attempting to download. Default for that option is
<code>NULL</code> meaning do not search locally.</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>Function or character string indicating the function to use to load
<code>targetFile</code> into an <code>R</code> object, e.g., in form with package name:
<code>"raster::raster"</code>.</p></td>
    </tr>
    <tr>
      <th>dlFun</th>
      <td><p>Optional "download function" name, such as <code>"raster::getData"</code>, which does
custom downloading, in addition to loading into R. Still experimental.</p></td>
    </tr>
    <tr>
      <th>quick</th>
      <td><p>Logical. This is passed internally to <code><a href='Checksums.html'>Checksums</a></code>
(the quickCheck argument), and to
<code><a href='cache.html'>Cache</a></code> (the quick argument). This results in faster, though
less robust checking of inputs. See the respective functions.</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>Logical. Should downloading and all the other actions occur
even if they pass the checksums or the files are all there.</p></td>
    </tr>
    <tr>
      <th>purge</th>
      <td><p>Logical or Integer. <code>0/FALSE</code> (default) keeps existing
<code>CHECKSUMS.txt</code> file and
<code>prepInputs</code> will write or append to it. <code>1/TRUE</code> will deleted the entire
<code>CHECKSUMS.txt</code> file. Other options, see details.</p></td>
    </tr>
    <tr>
      <th>useCache</th>
      <td><p>Passed to Cache in various places. Defaults to <code><a href='https://www.rdocumentation.org/packages/base/topics/options'>getOption("reproducible.useCache")</a></code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to <code>fun</code> (i.e,. user supplied),
 <code><a href='postProcess.html'>postProcess</a></code> and <code><a href='cache.html'>Cache</a></code>.
Since <code>...</code> is passed to <code><a href='postProcess.html'>postProcess</a></code>, these will
<code>...</code> will also be passed into the inner
functions, e.g., <code><a href='cropInputs.html'>cropInputs</a></code>. See details and examples.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with 5 elements, <code>checkSums</code> (the result of a <code>Checksums</code>
after downloading), <code>dots</code> (cleaned up ..., including deprecated argument checks),
<code>fun</code> (the function to be used to load the preProcessed object from disk),
and <code>targetFilePath</code> (the fully qualified path to the <code>targetFile</code>).</p>
    
    <h2 class="hasAnchor" id="combinations-of-targetfile-url-archive-alsoextract"><a class="anchor" href="#combinations-of-targetfile-url-archive-alsoextract"></a>Combinations of <code>targetFile</code>, <code>url</code>, <code>archive</code>, <code>alsoExtract</code></h2>

    
    <p></p><table class='table'>
<tr><td></td><td># Params</td><td></td><td><code>url</code></td><td></td><td></td><td><code>targetFile</code></td><td></td></tr>
<tr><td></td><td><code>archive</code></td><td></td><td></td><td><code>alsoExtract</code></td><td></td><td>Result</td><td>Checksum 1st time</td></tr>
<tr><td>Checksum 2nd time</td><td></td><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td></tr>
<tr><td>------</td><td>------</td><td></td><td><b>1</b></td><td></td><td>char</td><td>NULL</td><td>NULL</td></tr>
<tr><td>NULL</td><td>Download, extract all files if an archive, guess at</td><td><code>targetFile</code></td><td>, load into R</td><td>write or append all new files</td><td>same as 1st -- no</td><td><code>targetFile</code></td><td>*</td></tr>
<tr><td></td><td></td><td>NULL</td><td>char</td><td>NULL</td><td>NULL</td><td>load</td><td><code>targetFile</code></td></tr>
<tr><td>into R</td><td>write or append</td><td><code>targetFile</code></td><td></td><td>no downloading, so no checksums use</td><td></td><td></td><td>NULL</td></tr>
<tr><td>NULL</td><td>char</td><td>NULL</td><td>extract all files, guess at</td><td><code>targetFile</code></td><td>, load into R</td><td>write or append all new files</td><td>no downloading, so no checksums use</td></tr>
<tr><td></td><td></td><td>NULL</td><td>NULL</td><td>NULL</td><td>char</td><td>guess at</td><td><code>targetFile</code></td></tr>
<tr><td>from files in</td><td><code>alsoExtract</code></td><td>, load into R</td><td>write or append all new files</td><td>no downloading, so no checksums use</td><td></td><td>------</td><td>------</td></tr>
<tr><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td><td></td><td><b>2</b></td></tr>
<tr><td></td><td>char</td><td>char</td><td>NULL</td><td>NULL</td><td>Download, extract all files if an archive, load</td><td><code>targetFile</code></td><td>into R</td></tr>
<tr><td>write or append all new files</td><td>use Checksums, skip downloading</td><td></td><td></td><td>char</td><td>NULL</td><td>char</td><td>NULL</td></tr>
<tr><td>Download, extract all files, guess at</td><td><code>targetFile</code></td><td>, load into R</td><td>write or append all new files</td><td>same as 1st -- no</td><td><code>targetFile</code></td><td>*</td><td></td></tr>
<tr><td></td><td>char</td><td>NULL</td><td>NULL</td><td>char</td><td>Download, extract only named files in</td><td><code>alsoExtract</code></td><td>, guess at</td></tr>
<tr><td><code>targetFile</code></td><td>, load into R</td><td>write or append all new files</td><td>same as 1st -- no</td><td><code>targetFile</code></td><td>*</td><td></td><td></td></tr>
<tr><td>NULL</td><td>char</td><td>NULL</td><td>char</td><td>load</td><td><code>targetFile</code></td><td>into R</td><td>write or append all new files</td></tr>
<tr><td>no downloading, so no checksums use</td><td></td><td></td><td>NULL</td><td>char</td><td>char</td><td>NULL</td><td>Extract all files, load</td></tr>
<tr><td><code>targetFile</code></td><td>into R</td><td>write or append all new files</td><td>no downloading, so no checksums use</td><td></td><td></td><td>NULL</td><td>NULL</td></tr>
<tr><td>char</td><td>char</td><td>Extract only named files in</td><td><code>alsoExtract</code></td><td>, guess at</td><td><code>targetFile</code></td><td>, load into R</td><td>write or append all new files</td></tr>
<tr><td>no downloading, so no checksums use</td><td></td><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td></tr>
<tr><td>------</td><td>------</td><td></td><td><b>3</b></td><td></td><td>char</td><td>char</td><td>char</td></tr>
<tr><td>NULL</td><td>Download, extract all files, load</td><td><code>targetFile</code></td><td>into R</td><td>write or append all new files</td><td>use Checksums, skip downloading</td><td></td><td></td></tr>
<tr><td>char</td><td>NULL</td><td>char</td><td>char</td><td>Download, extract files named in</td><td><code>alsoExtract</code></td><td>, guess at</td><td><code>targetFile</code></td></tr>
<tr><td>, load into R</td><td>write or append all new files</td><td>use Checksums, skip downloading</td><td></td><td></td><td>char</td><td>NULL</td><td>char</td></tr>
<tr><td></td><td><code>"similar"</code></td><td></td><td>Download, extract all files (can't understand "similar"), guess at</td><td><code>targetFile</code></td><td>, load into R</td><td>write or append all new files</td><td>same as 1st -- no</td></tr>
<tr><td><code>targetFile</code></td><td>*</td><td></td><td></td><td>char</td><td>char</td><td>NULL</td><td>char</td></tr>
<tr><td>Download, if an archive, extract files named in</td><td><code>targetFile</code></td><td>and</td><td><code>alsoExtract</code></td><td>, load</td><td><code>targetFile</code></td><td>into R</td><td>write or append all new files</td></tr>
<tr><td>use Checksums, skip downloading</td><td></td><td></td><td>char</td><td>char</td><td>NULL</td><td></td><td><code>"similar"</code></td></tr>
<tr><td></td><td>Download, if an archive, extract files with same base as</td><td><code>targetFile</code></td><td>, load</td><td><code>targetFile</code></td><td>into R</td><td>write or append all new files</td><td>use Checksums, skip downloading</td></tr>
<tr><td></td><td></td><td>char</td><td>char</td><td>char</td><td>NULL</td><td>Download, extract all files from archive, load</td><td><code>targetFile</code></td></tr>
<tr><td>into R</td><td>write or append all new files</td><td>use Checksums, skip downloading</td><td></td><td></td><td>NULL</td><td>char</td><td>char</td></tr>
<tr><td>char</td><td>Extract  files named in</td><td><code>alsoExtract</code></td><td>from archive, load</td><td><code>targetFile</code></td><td>into R</td><td>write or append all new files</td><td>no downloading, so no checksums use</td></tr>
<tr><td></td><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td><td>------</td></tr>
<tr><td>------</td><td></td><td><b>4</b></td><td></td><td>char</td><td>char</td><td>char</td><td>char</td></tr>
<tr><td>Download, extract files named in</td><td><code>targetFile</code></td><td>and</td><td><code>alsoExtract</code></td><td>, load</td><td><code>targetFile</code></td><td>into R</td><td>write or append all new files</td></tr>
<tr><td>use Checksums, skip downloading</td><td></td><td></td><td>char</td><td>char</td><td>char</td><td></td><td><code>"similar"</code></td></tr>
<tr><td></td><td>Download, extract all files with same base as</td><td><code>targetFile</code></td><td>, load</td><td><code>targetFile</code></td><td>into R</td><td>write or append all new files</td><td>use Checksums, skip downloading</td></tr>
<tr><td></td><td></td><td></td><td># Params</td><td></td><td><code>url</code></td><td></td><td></td></tr>
</table>
<p><code>*</code> If the <code>url</code> is a file on Google Drive, checksumming will work
 even without a <code>targetFile</code> specified because there is an initial attempt
 to get the remove file information (e.g., file name). With that, the connection
 between the <code>url</code> and the filename used in the CHECKSUMS.txt file can be made.</p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#combinations-of-targetfile-url-archive-alsoextract">Combinations of <code>targetFile</code>, <code>url</code>, <code>archive</code>, <code>alsoExtract</code></a></li>
          </ul>

    <h2>Author</h2>
    <p>Eliot McIntire</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Eliot J B McIntire, Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

